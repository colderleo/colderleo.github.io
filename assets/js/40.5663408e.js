(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{523:function(s,e,t){"use strict";t.r(e);var a=t(21),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"wsl版本选择"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl版本选择"}},[s._v("#")]),s._v(" wsl版本选择")]),s._v(" "),t("ul",[t("li",[s._v("电脑性能不好选wsl1，性能好选wsl2或者虚拟机。")]),s._v(" "),t("li",[s._v("wsl1选Ubuntu-20.04, Ubuntu-22.04的gdb有点问题。")]),s._v(" "),t("li",[s._v("pwershell执行"),t("code",[s._v("wsl -l -v")]),s._v("查看安装的wsl版本")])]),s._v(" "),t("h2",{attrs:{id:"win10安装wsl后设置root为默认登录账户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#win10安装wsl后设置root为默认登录账户"}},[s._v("#")]),s._v(" win10安装wsl后设置root为默认登录账户")]),s._v(" "),t("ul",[t("li",[s._v("应用商店安装Ubuntu-20.04，启动后设置普通用户的用户名和密码")]),s._v(" "),t("li",[s._v("sudo passwd root,  设置root密码")]),s._v(" "),t("li",[s._v("先powershell停止wsl服务 "),t("code",[s._v("net stop lxssmanager")])]),s._v(" "),t("li",[s._v("再设置默认登录为root\n"),t("code",[s._v("/c/Users/用户名/AppData/Local/Microsoft/WindowsApps/ubuntu2004.exe config --default-user root")])]),s._v(" "),t("li",[s._v("重新进入wsl")])]),s._v(" "),t("h2",{attrs:{id:"设置软连接方便访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置软连接方便访问"}},[s._v("#")]),s._v(" 设置软连接方便访问")]),s._v(" "),t("p",[s._v("可以将常用目录软连接至/root下面，方便切换\n比如常用目录为/mnt/c/dorit")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /mnt/c/dorit/ /root/dorit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"切换至root后-可安装以下常用软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#切换至root后-可安装以下常用软件"}},[s._v("#")]),s._v(" 切换至root后，可安装以下常用软件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gdb\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("如果安装源连不上，或者连接速度太慢，可尝试更换apt源\n"),t("a",{attrs:{href:"https://www.cnblogs.com/codingbigdog/p/16324800.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/codingbigdog/p/16324800.html"),t("OutboundLink")],1),s._v("\n20.04STL源")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释")]),s._v("\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse")]),s._v("\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse")]),s._v("\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse")]),s._v("\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 预发布软件源，不建议启用")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-proposed main restricted universe multiverse")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h2",{attrs:{id:"win10安装wsl-ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#win10安装wsl-ssh"}},[s._v("#")]),s._v(" win10安装wsl-ssh")]),s._v(" "),t("p",[s._v("windows 自带的ssh服务器功能貌似有问题，可以先安装wsl，再在wsl上安装ssh")]),s._v(" "),t("h5",{attrs:{id:"安装wsl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装wsl"}},[s._v("#")]),s._v(" 安装WSL：")]),s._v(" "),t("ul",[t("li",[s._v("https://www.jianshu.com/p/cd4d604e0b44")]),s._v(" "),t("li",[s._v("windows添加或删除功能，开启WSL")]),s._v(" "),t("li",[s._v("从windows应用商店里安装ubantu STL")])]),s._v(" "),t("h5",{attrs:{id:"ubantu安装ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubantu安装ssh"}},[s._v("#")]),s._v(" ubantu安装ssh")]),s._v(" "),t("p",[s._v("https://blog.csdn.net/qq_38558270/article/details/88531795")]),s._v(" "),t("ol",[t("li",[s._v("先设置apt 安装源")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份原来的源配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/apt/sources.list /etc/apt/sources.list.bak\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/apt/sources.list\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替换为下面的内容")]),s._v("\ndeb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新软件列表")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新软件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" upgrade\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新软件（自动处理依赖）：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" dist-upgrade\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载中文语言包：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" language-pack-zh-han*\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("然后卸载自带的，重新安装，因为自带貌似有问题")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo apt-get remove openssh-server\nsudo apt-get remove openssh-client\n\n# 这里很可能安装错误，如果出错看下面的方法\nsudo apt-get install openssh-server\nsudo apt-get install openssh-client\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("安装ssh如果提示错误："),t("code",[s._v("E: Could not read response to hello message from hook [ ! -f /usr/bin/snap ]")]),s._v(" , 则执行")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo rm -rf /etc/apt/apt.conf.d/20snapd.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("修改配置文件：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 备份\nsudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak\n\n# 修改配置文件\nsudo vim /etc/ssh/sshd_config\n\n# 修改下面的内容。 Port设置成2022，是为了不占用windows的22端口。看自己喜好\nPort 2022\nPasswordAuthentication yes\nPermitRootLogin yes\n# 修改完成后重启服务\n\nsudo service ssh restart\n\n# ssh加入开机自启动。 注意wsl这样设置似乎没用。想开机启动参考下面的方法。\nsudo systemctl enable ssh\n# 或者下面的\nvi /etc/rc.local\n加入：service ssh start\n\n# 注意上面的服务名在ubuntu上是ssh，在centos上是sshd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h4",{attrs:{id:"其他设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他设置"}},[s._v("#")]),s._v(" 其他设置")]),s._v(" "),t("ol",[t("li",[s._v("设置root密码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo passwd root\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("设置wsl开机启动\n参考 https://zhuanlan.zhihu.com/p/47733615 里面的评论，新建"),t("code",[s._v("wsl_start.bat")]),s._v("脚本放在startup文件夹。该脚本即启动了wsl又启动了wsl内的ssh")])]),s._v(" "),t("p",[s._v("wsl_start.bat")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("wsl -u root /etc/init.d/ssh start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"win10安装官方的ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#win10安装官方的ssh"}},[s._v("#")]),s._v(" win10安装官方的ssh")]),s._v(" "),t("p",[s._v("之前安装了ssh后vscode的remote-ssh不能用，现在更新后可以了，remote ssh连上的时候回提示选windows/linux。")]),s._v(" "),t("h4",{attrs:{id:"windows安装open-ssh官方文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows安装open-ssh官方文档"}},[s._v("#")]),s._v(" windows安装open-ssh官方文档")]),s._v(" "),t("p",[s._v("https://docs.microsoft.com/zh-cn/windows-server/administration/openssh/openssh_install_firstuse")]),s._v(" "),t("p",[s._v("在windows应用-可选功能里安装ssh server")]),s._v(" "),t("ul",[t("li",[s._v("默认安装在"),t("code",[s._v("C:/Program Files/OpenSSH/")])]),s._v(" "),t("li",[s._v("配置文件： "),t("code",[s._v("C:\\ProgramData\\ssh")])])]),s._v(" "),t("p",[s._v("安装完成后管理员打开powershell，启动ssh服务，配置防火墙等")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Start-Service sshd\n# OPTIONAL but recommended:\nSet-Service -Name sshd -StartupType 'Automatic'\n# Confirm the Firewall rule is configured. It should be created automatically by setup. \nGet-NetFirewallRule -Name *ssh*\n# There should be a firewall rule named \"OpenSSH-Server-In-TCP\", which should be enabled\n# If the firewall does not exist, create one\nNew-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd)' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"登陆失败时新建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登陆失败时新建用户"}},[s._v("#")]),s._v(" 登陆失败时新建用户")]),s._v(" "),t("p",[s._v("默认登陆时用户名和密码可以用windows的账户，如果登陆失败，可尝试在 "),t("code",[s._v("计算机管理-本地用户和组")]),s._v(" 中新建用户，赋予管理员权限，然后登陆。")]),s._v(" "),t("h4",{attrs:{id:"bad-owener-or-permission-on-ssh-config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bad-owener-or-permission-on-ssh-config"}},[s._v("#")]),s._v(" bad owener or permission on .ssh/config")]),s._v(" "),t("p",[s._v("参考 https://www.cnblogs.com/microestc/p/10840315.html")]),s._v(" "),t("p",[s._v("将~/.ssh/config剪切至c:/programdata/ssh/ssh_config （config重命名为ssh_config）")]),s._v(" "),t("h4",{attrs:{id:"id-rsa免密登陆"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#id-rsa免密登陆"}},[s._v("#")]),s._v(" id_rsa免密登陆")]),s._v(" "),t("p",[s._v("参考 https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_keymanagement")]),s._v(" "),t("p",[s._v("假设需要从某个客户单电脑用户zhangsan连接到服务器电脑用户school上")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("在客户端zhangsan个人文件夹下创建公钥秘钥对")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# cd到当前用户目录下的.ssh文件夹， 比如C:\\Users\\zhangsan\\.ssh\ncd ~\\.ssh\\\n\n# 创建密钥对， 会生成id_rsa, id_rsa.pub\nssh-keygen\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("复制id_rsa.pub到服务器school用户文件夹下~.ssh\\authorized_keys上。如果authorized_keys不存在则创建，如果已存在就追加")])]),s._v(" "),t("li",[t("p",[s._v("服务端启动ssh-agent服务，然后管理员运行powershell，执行ssh-add")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd ~\\.ssh\\\nssh-add id_rsa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("如果提示id_rsa权限too open，可在其'文件属性-安全'中修复id_rsa权限:")]),s._v(" "),t("p",[s._v("属性---安全---高级---禁用继承---保留转换，然后删除其他用户权限，只保留当前用户、administrators、SYSTEM。（当前用户可能不需要勾选完全控制）")]),s._v(" "),t("p",[s._v("同时对authorized_keys也修复权限：")]),s._v(" "),t("p",[s._v("客户端如果配置了"),t("code",[s._v(".ssh\\config")]),s._v("，并且在读取的时候有问题，也用同样的方法对其修复权限。")])]),s._v(" "),t("li",[t("p",[s._v("在客户端尝试使用"),t("code",[s._v("ssh -i")]),s._v("登陆，如果仍要求输入密码，可尝试修改sshd_config。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh -i ~/id_rsa school@localhost\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("参考 https://www.cnblogs.com/surplus/p/12466466.html")]),s._v(" "),t("p",[s._v("以管理员权限打开 PowerShell，执行命令")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("notepad C:\\ProgramData\\ssh\\sshd_config\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("注释掉配置文件中的最后两行然后保存：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#Match Group administrators\n#       AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("最后在服务管理器器中重启 OpenSSH SSH Server 服务，然后客户端就可以通过公钥认证的方式登录到远程服务器了。")]),s._v(" "),t("p",[s._v("注意：\n一定不要用 Repair-AuthorizedKeyPermission 命令修复 .ssh\\authorized_keys 文件的权限。\n也不要用"),t("code",[s._v('echo "publickey" > .ssh\\authorized_keys')]),s._v("的方式创建 .ssh\\authorized_keys 文件：\n因为不需要用命令修复，所以不用安装"),t("code",[s._v("Install-Module -Force OpenSSHUtils -Scope AllUsers")]),s._v("，也不用管这个安装的时候签名错误的问题。")])])]),s._v(" "),t("h2",{attrs:{id:"再之前安装失败的过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#再之前安装失败的过程"}},[s._v("#")]),s._v(" 再之前安装失败的过程")]),s._v(" "),t("p",[s._v("可能是因为win10之前自己的bug，所以不成功。")]),s._v(" "),t("h4",{attrs:{id:"修复-ssh-config权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修复-ssh-config权限"}},[s._v("#")]),s._v(" 修复.ssh/config权限")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process\nimport-Module E:\\OpenSSH-Win64\\OpenSSHUtils.psm1\n\nRepair-UserSshConfigPermission ~/.ssh/config\nGet-ChildItem ~\\.ssh\\* -Include "id_rsa","id_dsa" -ErrorAction SilentlyContinue | % {\n    Repair-UserKeyPermission -FilePath $_.FullName @psBoundParameters\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"vscode-remote-ssh主页"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vscode-remote-ssh主页"}},[s._v("#")]),s._v(" vscode remote-ssh主页：")]),s._v(" "),t("p",[s._v("https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh")]),s._v(" "),t("h4",{attrs:{id:"win10-open-ssh-秘钥登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#win10-open-ssh-秘钥登录"}},[s._v("#")]),s._v(" win10 open-ssh 秘钥登录")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('$REMOTEHOST="qiang.chen@localhost"\n\nscp "$env:USERPROFILE\\.ssh\\siye_rsa.pub" "${REMOTEHOST}:~/tmp.pub"\nssh "$REMOTEHOST" "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat ~/tmp.pub >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys && rm -f ~/tmp.pub"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"ssh命令-指定秘钥文件登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh命令-指定秘钥文件登录"}},[s._v("#")]),s._v(" ssh命令，指定秘钥文件登录：")]),s._v(" "),t("p",[s._v("https://www.ktanx.com/blog/p/4016")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh -i ~/.ssh/liyddsshkey developer@192.168.1.237 -p 23\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"powershell-签名验证码错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#powershell-签名验证码错误"}},[s._v("#")]),s._v(" powershell 签名验证码错误")]),s._v(" "),t("p",[s._v("https://jingyan.baidu.com/article/36d6ed1f6e18b61bcf4883de.html")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("set-ExecutionPolicy RemoteSigned\nSet-ExecutionPolicy Unrestricted\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这个试了不行。")]),s._v(" "),t("p",[s._v("另一种解放方法：\nhttps://www.cnblogs.com/gs0724/p/11763640.html\n里面提到了win64-openssh的下载GitHub地址")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process\n\nimport-Module E:\\OpenSSH-Win64\\OpenSSHUtils.psm1\n\nRepair-UserKeyPermission ~/.ssh/id_rsa-siye\nRepair-UserSshConfigPermission ~/.ssh/config\nRepair-AuthorizedKeyPermission ~\\.ssh\\authorized_keys\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);