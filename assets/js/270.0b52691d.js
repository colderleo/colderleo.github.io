(window.webpackJsonp=window.webpackJsonp||[]).push([[270],{496:function(s,a,n){"use strict";n.r(a);var t=n(16),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h4",{attrs:{id:"内网穿透工具比较"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内网穿透工具比较"}},[s._v("#")]),s._v(" 内网穿透工具比较")]),s._v(" "),n("p",[s._v("(ngrok,frp,lanproxy,goproxy,nps)\nhttps://www.wezoz.com/")]),s._v(" "),n("h4",{attrs:{id:"frp"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#frp"}},[s._v("#")]),s._v(" frp")]),s._v(" "),n("p",[s._v("GitHub官网：https://github.com/fatedier/frp/")]),s._v(" "),n("h5",{attrs:{id:"服务端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务端"}},[s._v("#")]),s._v(" 服务端")]),s._v(" "),n("p",[s._v("下载服务端文件，可以放在，"),n("code",[s._v("/usr/local/src/frp/")]),s._v("，服务端默认配置为")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[common]\nbind_port = 7000\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h5",{attrs:{id:"启动服务方法一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动服务方法一"}},[s._v("#")]),s._v(" 启动服务方法一")]),s._v(" "),n("p",[s._v("参考：https://github.com/fatedier/frp/issues/176")]),s._v(" "),n("p",[s._v("使用systemd配置开机自启，适用于 centos7 Ubuntu 16 或 debian 8。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vi /etc/systemd/system/frps.service 新建此文件，并写入以下内容:\n[Unit]\nDescription=frps daemon\n\n[Service]\nType=simple\nExecStart=/usr/local/src/frp/frps -c /usr/local/src/frp/frps.ini\n\n[Install]\nWantedBy=multi-user.target\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("启动并设为开机自启。\n$ systemctl start frps\n$ systemctl enable frps")]),s._v(" "),n("p",[s._v("参照：lcbk.net/9766.html")]),s._v(" "),n("h5",{attrs:{id:"启动服务方法二"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动服务方法二"}},[s._v("#")]),s._v(" 启动服务方法二")]),s._v(" "),n("p",[s._v("命令后台运行参考：https://www.cnblogs.com/jinxiao-pu/p/9131057.html")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 不保存输出日志\nnohup /usr/local/src/frp/frps -c /usr/local/src/frp/frps.ini >/dev/null 2>&1 &\n\n# 设置开机自启动 `vim /etc/rc.local` 加入服务启动命令：\nnohup /usr/local/src/frp/frps -c /usr/local/src/frp/frps.ini >/dev/null 2>&1 &\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h5",{attrs:{id:"客户端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#客户端"}},[s._v("#")]),s._v(" 客户端")]),s._v(" "),n("p",[s._v("使用简单，配一下就跑起来了，很方便。\n客户端配置示例（frpc.ini）：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[common]\nserver_addr = 123.132.123.123\nserver_port = 7000\n\nadmin_addr = 127.0.0.1\nadmin_port = 7400\nadmin_user = admin\nadmin_pwd = admin\n\nlogin_fail_exit = false\n\n[ssh-40022]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 40022\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("ul",[n("li",[s._v("server_addr是服务器的ip")]),s._v(" "),n("li",[s._v("server_port是默认的服务器使用端口号")]),s._v(" "),n("li",[s._v("admin_*是网页管理， 可访问 http://127.0.0.1:7400 查看运行状态。")]),s._v(" "),n("li",[s._v("[ssh-40022] 这里如果用[ssh]，另一台机器上也用[ssh]，会提示重复，因此后面加上端口号防止名称重复")]),s._v(" "),n("li",[s._v("login_fail_exit 连接失败后是否退出，false表示不退出自动重连")])]),s._v(" "),n("p",[s._v("客户端编写"),n("code",[s._v("run_frpc.bat")]),s._v("脚本运行，并把该脚本创建快捷方式放进startup开机自启动")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('if "%1"=="hide" goto CmdBegin\nstart mshta vbscript:createobject("wscript.shell").run("""%~0"" hide",0)(window.close)&&exit\n:CmdBegin\n\n@echo off\nC:\\dorit\\frp\\frpc.exe\npause\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("前三行是为了让bat脚本运行后隐藏（会先出现黑框再隐藏）。\n另外可以尝试用nssm将其变成一个windows服务来运行。")]),s._v(" "),n("h4",{attrs:{id:"ngrok"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ngrok"}},[s._v("#")]),s._v(" ngrok")]),s._v(" "),n("p",[s._v("配置的时候比较麻烦，最后配好跑起来，显示connected，但是访问不了，不知道为啥。")]),s._v(" "),n("p",[s._v('参考：https://www.jianshu.com/p/f5c2a55e77bd\nexport NGROK_DOMAIN="ngrok.leostudio.top"')]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('//服务器开启服务\n/usr/local/src/ngrok/bin/ngrokd -domain="ngrok.leostudio.top" -httpAddr=":801" - httpsAddr=":4431" -tunnelAddr=":4443"\n\n// 放行防火墙： 另需注意安全组\nfirewall-cmd --zone=public --add-port=0-65535/tcp --permanent\nfirewall-cmd --zone=public --add-port=4431/tcp --permanent\nfirewall-cmd --reload\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);