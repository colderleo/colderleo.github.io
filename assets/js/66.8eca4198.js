(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{548:function(s,t,a){"use strict";a.r(t);var n=a(21),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"xargs-用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xargs-用法"}},[s._v("#")]),s._v(" xargs 用法")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.runoob.com/linux/linux-comm-xargs.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.runoob.com/linux/linux-comm-xargs.html"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt\nb1\nb2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将b.txt中每一行echo出来，不换行")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\nb1 b2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -I 将xargs前面的输入赋给{}，一般是一行一行赋值给 {}")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" -I "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nb1.b1\nb2.b2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("-a file 从文件中读入作为 stdin\n-e flag ，注意有的时候可能会是-E，flag必须是一个以空格分隔的标志，当xargs分析到含有flag这个标志的时候就停止。\n-p 当每次执行一个argument的时候询问一次用户。\n-n num 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。\n-t 表示先打印命令，然后再执行。\n-i 或者是-I，这得看linux支持了，将xargs的每项名称，一般是一行一行赋值给 {}，可以用 {} 代替。\n-r no-run-if-empty 当xargs的输入为空的时候则停止xargs，不用再去执行了。\n-s num 命令行的最大字符数，指的是 xargs 后面那个命令的最大命令行字符数。\n-L num 从标准输入一次读取 num 行送给 command 命令。\n-l 同 -L。\n-d delim 分隔符，默认的xargs分隔符是回车，argument的分隔符是空格，这里修改的是xargs的分隔符。\n-x exit的意思，主要是配合-s使用。。\n-P 修改最大的进程数，默认是1，为0时候为as many as it can ，这个例子我没有想到，应该平时都用不到的吧。")]),s._v(" "),a("h3",{attrs:{id:"xarg或awk批量解压zip文件-并为每个zip文件创建对应的文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xarg或awk批量解压zip文件-并为每个zip文件创建对应的文件夹"}},[s._v("#")]),s._v(" xarg或awk批量解压zip文件, 并为每个zip文件创建对应的文件夹")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先创建两个zip文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" a1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" a2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" -r "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".zip "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" -r "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".zip "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $ ls")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.txt  1.zip  2.txt  2.zip")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# xargs解压文件到 1.zip.folder  2.zip.folder")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" *.zip "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" -I "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(".folder\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk解压文件到  1  2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" *.zip "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F. "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{print "unzip " $0 " -d " $1 }\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面awk如果不加 | bash, 则输出: ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".zip -d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".zip -d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# awk中print可以用逗号表示空格，看起来更清晰")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" *.zip "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F. "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{print "unzip", $0, "-d", $1 }\'')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h2",{attrs:{id:"awk用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awk用法"}},[s._v("#")]),s._v(" awk用法")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.runoob.com/linux/linux-comm-awk.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.runoob.com/linux/linux-comm-awk.html"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"指定多个分隔符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定多个分隔符"}},[s._v("#")]),s._v(" 指定多个分隔符")]),s._v(" "),a("ul",[a("li",[s._v("指定分隔符 awk -F.")]),s._v(" "),a("li",[s._v("指定多个分隔符（点和空格） awk -F '[. ]'")])]),s._v(" "),a("p",[s._v("通过tcpdump提取pcap包中的纳秒时间戳并转成csv")]),s._v(" "),a("p",[s._v("用tcpdump准备一个txt文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先用tcpdump捕获一个纳秒精度的pcap包")]),s._v("\n$ tcpdump --time-stamp-precision "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nano")]),s._v(" -i any -tt "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" temp.txt\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" temp.txt\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652019592.596857863")]),s._v(" IP tcyun.39862 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.228")]),s._v(".226.13.43500\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652019592.603060220")]),s._v(" IP "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.228")]),s._v(".226.13.43500 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" tcyun.39862\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("指定分隔符得到秒和纳秒两个数字并print出来，逗号print出来是空格")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" temp.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[. ]'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1, $2}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652019592")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("596857863")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652019592")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("603060220")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("通过计算得到纳秒  注意最后863变成了856，220变成224最后两位变了，可能是因为浮点数精度的问题")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" temp.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[. ]'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print ($1*1000000000+$2)}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652019592596857856")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652019592603060224")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为了避免这种精度错误，可以直接print $1 $2 ")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" temp.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" -F "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[. ]'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1 $2}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652019592596857863")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652019592603060220")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"printf格式化输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#printf格式化输出"}},[s._v("#")]),s._v(" printf格式化输出")]),s._v(" "),a("p",[s._v("awk有可能输出科学计数法，比如3e9之类的形式，可通过printf指定格式")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111.123456789")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{printf(\"ts=%.4f\\n\",$1)}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1121.1235")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.123")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ts=$1+1; printf(\"ts=%06.3f\\n\",ts)}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ts")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("02.123\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"awk同时处理多个文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awk同时处理多个文件"}},[s._v("#")]),s._v(" awk同时处理多个文件")]),s._v(" "),a("p",[s._v("准备a.txt、b.txt两个文件。处理的时候是每个文件依次按行处理的")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" a.txt\na1\na2\na3\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" b.txt\nb1\nb2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 读取  FNR表示正在读取文件的行数  FILENAME是正在读取的文件名")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'FILENAME=="a.txt"{printf("in a.txt, line(%d): %s\\n", FNR, $1)} FILENAME=="b.txt"{printf("in b.txt, line(%d): %s\\n", FNR, $1)}\'')]),s._v(" a.txt b.txt\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a.txt, line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": a1\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a.txt, line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": a2\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a.txt, line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": a3\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" b.txt, line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": b1\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" b.txt, line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": b2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面的 FILENAME也可以换成ARGIND ")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'ARGIND==1{printf("in a.txt, line(%d): %s\\n", FNR, $1)} ARGIND==2{printf("in b.txt, line(%d): %s\\n", FNR, $1)}\'')]),s._v(" a.txt b.txt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面的 FILENAME也可以FILENAME==ARGV[1]  结果一样")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'FILENAME==ARGV[1]{printf("in a.txt, line(%d): %s\\n", FNR, $1)} FILENAME==ARGV[1]{printf("in b.txt, line(%d): %s\\n", FNR, $1)}\'')]),s._v(" a.txt b.txt\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件按行合并  注意因为b.txt中只有两行，所以合并下来最终只有两行")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'FILENAME=="a.txt"{dict_a[FNR]=$1} FILENAME=="b.txt"{print dict_a[FNR], $1}\'')]),s._v(" a.txt b.txt\na1 b1\na2 b2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果要解决上面的问题，可以把a.txt(行数最多的)放在后面")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'FILENAME=="b.txt"{dict_b[FNR]=$1} FILENAME=="a.txt"{print $1, dict_b[FNR]}\'')]),s._v(" b.txt a.txt\na1 b1\na2 b2\na3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])]),a("h3",{attrs:{id:"awk精度问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awk精度问题"}},[s._v("#")]),s._v(" awk精度问题")]),s._v(" "),a("p",[s._v("太小的数字会被当做字符串 https://byteofbio.com/archives/1.html")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".226e-308 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{if($1<0.05) {print "is small"} else{print "not small"}}\'')]),s._v("\nis small\n\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".225e-308 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{if($1<0.05) {print "is small"} else{print "not small"}}\'')]),s._v("\nnot small\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解决方法： 使用 strtonum() 函数")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".225e-308 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{if(strtonum($1)<0.05) {print "is small"} else{print "not small"}}\'')]),s._v("\nis small\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("长度超过16的数字计算有问题，末尾超过16位的不对。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 7个1， 9个3， 9个0")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1111111")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("333333333")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print ($1*1000000000+$2)}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1111111333333333")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 8个1， 9个3， 9个0")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11111111")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("333333333")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print ($1*1000000000+$2)}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11111111333333332")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 12个1， 9个3， 9个0")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111111111")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("333333333")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print ($1*1000000000+$2)}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111111111333330944")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解决方法之一：通过bc命令计算")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111111111")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("333333333")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{printf(\"%d*1000000000+%d\\n\", $1, $2)}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111111111")]),s._v("*1000000000+333333333\n\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111111111")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("333333333")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{printf(\"%d*1000000000+%d\\n\", $1, $2)}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111111111333333333")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解决方法之二：避免超过16位的数字，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# excel在超过15位后会将后面的变为0，小点的数字也方便excel处理")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("pandas.dataframe在计算时同样有上述精度问题，计算结果会是256的整数倍")]),s._v(" "),a("h2",{attrs:{id:"sed用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sed用法"}},[s._v("#")]),s._v(" sed用法")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/wdz306ling/article/details/80087889/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.csdn.net/wdz306ling/article/details/80087889/"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("sed")])])}),[],!1,null,null,null);t.default=e.exports}}]);