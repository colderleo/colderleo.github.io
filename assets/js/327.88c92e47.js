(window.webpackJsonp=window.webpackJsonp||[]).push([[327],{806:function(s,a,t){"use strict";t.r(a);var n=t(21),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h4",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),t("p",[s._v("Centos7上默认安装的是mysql的分支mariadb，如果需要可以先卸载mariadb，再安装mysql\n（据说装mariadb和mysql哪个都可以）")]),s._v(" "),t("h4",{attrs:{id:"卸载原来的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#卸载原来的"}},[s._v("#")]),s._v(" 卸载原来的")]),s._v(" "),t("p",[s._v("检查是否已经安装mysql")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rpm -qa | grep mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("centos 7 下需要删除mariadb\n检查：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rpm -qa | grep mariadb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果已经安装，则卸载掉")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("【--nodeps 强力删除，包含各种依赖包】")]),s._v(" "),t("h4",{attrs:{id:"通过mysql官方yum包安装mysql5-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过mysql官方yum包安装mysql5-7"}},[s._v("#")]),s._v(" 通过mysql官方yum包安装mysql5.7")]),s._v(" "),t("p",[s._v("如果直接安装"),t("code",[s._v("yum -y install mysql-server mysql mysql-devel")]),s._v("，这样仍会安装mariadb")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 下载mysql官方的rpm\ncd /usr/local/src\nwget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm\n\n# 添加该rpm\nyum -y install mysql57-community-release-el7-10.noarch.rpm\n\n# 安装。 会安装mysql5.7的最新版本，比如5.7.30\nyum -y install mysql-community-server\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("上面的mysql57-community-release-el7-10.noarch.rpm， 不是某个小版本，而是对应的mysql5.7的大版本。这里可以找到该下载链接 https://repo.mysql.com/yum/mysql-5.7-community/el/7/x86_64/")]),s._v(" "),t("h4",{attrs:{id:"通过mysql官方yum包安装mysql-devel-为了安装mysqlclient"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过mysql官方yum包安装mysql-devel-为了安装mysqlclient"}},[s._v("#")]),s._v(" 通过mysql官方yum包安装mysql-devel(为了安装mysqlclient)")]),s._v(" "),t("p",[s._v("参考："),t("a",{attrs:{href:"https://blog.csdn.net/anmo1221/article/details/99462152",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.csdn.net/anmo1221/article/details/99462152"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("在这里找到需要的yum包： https://repo.mysql.com/yum/mysql-5.7-community/el/7/x86_64/ 下载下来")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 下载\ncd /usr/local/src\nwget https://repo.mysql.com/yum/mysql-5.7-community/el/7/x86_64/mysql-community-devel-5.7.30-1.el7.x86_64.rpm\n\n# 安装\nrpm -ivh mysql-community-devel-5.7.30-1.el7.x86_64.rpm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"启动mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql"}},[s._v("#")]),s._v(" 启动mysql")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 启动mysql\nsystemctl start mysqld.service\n\n# 设置开机自启\nsystemctl enable mysqld.service\n\n# 查看运行状态\nsystemctl status mysqld.service\n\n# 结束\nsystemctl stop mysqld.service\n\n# 重启\nsystemctl restart mysqld.service\n\n\n# 也可以通过进程查看mysql是否启动\nps -ef | grep mysqld\n# 这里如果只有一条grep --color=auto mysqld， 表明没有启动。可以用ps -ef | grep -v grep |grep mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h4",{attrs:{id:"设置mysql密码和创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置mysql密码和创建用户"}},[s._v("#")]),s._v(" 设置mysql密码和创建用户")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过log查看默认密码 https://www.cnblogs.com/equation/p/8459237.html")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'temporary password'")]),s._v(" /var/log/mysqld.log\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入mysql交互命令行，（提示输入密码）：")]),s._v("\nmysql -uroot -p\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改root密码  https://blog.csdn.net/qq_31220649/article/details/89468706")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root@localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pswd123'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果提示密码不符合规则，可修改密码安全等级")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" global "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("validate_password_policy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 扩展root的host登陆范围  https://www.cnblogs.com/hengwei/p/10861719.html")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# GRANT ALL ON 库名.表名 to '用户名'@'IP地址' identified by '密码'")]),s._v("\nGRANT ALL ON *.* TO "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pswd123'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH PRIVILEGES"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建普通用户 参考 https://www.cnblogs.com/zhongyehai/p/10695659.html")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CREATE "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zhangsan'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给普通用户授权")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GRANT ALL ON *.* TO "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zhangsan'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH PRIVILEGES"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("h4",{attrs:{id:"其他设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他设置"}},[s._v("#")]),s._v(" 其他设置")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("centos: /etc/my.cnf\nubuntu: /etc/mysql/mysql.conf.d/mysqld.cnf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim /etc/my.cnf\n\n# 性能优化\ninnodb_flush_log_at_trx_commit=2\n\n# 自定义端口号\nport=3305\n\n# 重启\nsystemctl restart mysqld.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"删除数据、日志重新初始化。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除数据、日志重新初始化。"}},[s._v("#")]),s._v(" 删除数据、日志重新初始化。")]),s._v(" "),t("p",[s._v("linux下，MySQL默认的数据文档存储目录为"),t("code",[s._v("/var/lib/mysql")])]),s._v(" "),t("p",[s._v("rm -rf /var/lib/mysql")]),s._v(" "),t("p",[s._v("rm -rf /var/log/mysql.log")]),s._v(" "),t("p",[s._v("重新初始化：service mysqld start #此命令默认执行初始化操作")]),s._v(" "),t("p",[s._v("​           service mysqld status #查看mysql的状态")]),s._v(" "),t("p",[s._v("​           service mysqld stop #停止 mysql")])])}),[],!1,null,null,null);a.default=e.exports}}]);