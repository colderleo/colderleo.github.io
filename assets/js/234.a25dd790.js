(window.webpackJsonp=window.webpackJsonp||[]).push([[234],{715:function(s,n,a){"use strict";a.r(n);var e=a(21),r=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h4",{attrs:{id:"json文件读写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#json文件读写"}},[s._v("#")]),s._v(" json文件读写")]),s._v(" "),a("p",[s._v("python中的字典可以直接保存为json文件，也可以读取python文件load之后变成字典对象")]),s._v(" "),a("p",[s._v("如果字典中字符串含有中文，在调用json.dum时，会默认被保存成\\u开头的编码，此时需要在参数中加上"),a("code",[s._v("ensure_ascii=False")]),s._v("。读取的时候不用管，直接读就是正常的。"),a("code",[s._v("indent = 4")]),s._v("表示json保存的时候格式化，缩进为4个空格。")]),s._v(" "),a("h4",{attrs:{id:"tools-py"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tools-py"}},[s._v("#")]),s._v(" tools.py")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("import logging, coloredlogs\nfrom functools import wraps\nimport json\n\n# 使用:  from tools import config, saveConfig, logger, printExcept\n\n\n# config.json文件\nwith open('config.json','r',encoding='utf-8') as f:\n    config = json.load(f)\n\ndef saveConfig(confDict):\n    with open('config.json', 'w',encoding='utf-8') as f:\n        json.dump(confDict, f, ensure_ascii=False, indent=4)\n        \n        \n\n# 多次尝试执行某个函数，\n# 该函数返回bool类型，True表示成功。False表示失败\n# 多次尝试，执行成功立刻返回Ture，重试多次都失败则返回False\ndef tryExecTimes(func, times:int, *args, **kwargs)->bool:\n    for i in range(times):\n        ret = func(*args, **kwargs)\n        if ret:\n            return True\n    return False\n\n\n\n\n# color logging\nclass _logger:\n    def __init__(self):\n        coloredlogs.DEFAULT_FIELD_STYLES = \\\n            {'asctime': {'color': 'green'},\n                'hostname': {'color': 'magenta'},\n                'levelname': {'color': 'black', 'bold': True},\n                'module': {'color': 'blue'},\n                'name': {'color': 'blue'},\n                'programname': {'color': 'cyan'}\n            }\n        coloredlogs.DEFAULT_LEVEL_STYLES = \\\n            {'critical': {'bold': True, 'background':'red'},\n                'debug': {'color': 'green'},\n                'error': {'color': 'red'},\n                'info': {},\n                'notice': {'color': 'magenta'},\n                'spam': {'color': 'green', 'faint': True},\n                'success': {'color': 'green', 'bold': True},\n                'verbose': {'color': 'blue'},\n                'warning': {'color': 'yellow'}\n            }\n\n        self.logger = logging.getLogger('main')\n        # coloredlogs.install(level='INFO', fmt='%(asctime)s,%(msecs)03d %(levelname)s %(message)s')  不要删\n        coloredlogs.install(level='INFO', fmt='%(asctime)s, %(levelname)s, %(module)s[%(lineno)d] %(message)s')\n\n        # Some examples.\n        # logger.debug(\"this is a debugging message\")\n        # logger.info(\"this is an informational message\")\n        # logger.warning(\"this is a warning message\")\n        # logger.error(\"this is an error message\")\n        # logger.critical(\"this is a critical message\")\n\nlogger = _logger().logger\n\n\n\n\n# wrap一段代码，如果有异常则打印异常信息，然后继续运行。\ndef printExcept(func):\n    @wraps(func)\n    def inner(*args, **kwargs):\n        try:\n            ret = func(*args, **kwargs)\n            return ret\n        except Exception as e:\n            print(\"func '{}' error: {}\".format(func.__name__, str(e)))\n    return inner\n\n\ndef wrapperTpl(func):\n    @wraps(func)\n    def inner(*args, **kwargs):\n        '''在执行目标函数之前要执行的内容'''\n        ret = func(*args, **kwargs)\n        '''在执行目标函数之后要执行的内容'''\n        return ret\n    return inner\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);