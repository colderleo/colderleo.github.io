(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{521:function(e,t,a){"use strict";a.r(t);var s=a(16),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("微信官网文档\nhttps://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html")]),e._v(" "),a("p",[e._v("参考文章")]),e._v(" "),a("p",[e._v("https://www.baidu.com/s?wd=h5+%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95&ie=utf-8&tn=02049043_27_pg")]),e._v(" "),a("p",[e._v("https://www.jianshu.com/p/03bc80db50e4")]),e._v(" "),a("h2",{attrs:{id:"我的实践-获取用户openid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我的实践-获取用户openid"}},[e._v("#")]),e._v(" 我的实践-获取用户openid")]),e._v(" "),a("p",[e._v("openid的获取相对简单一点，该模式为snsapi_base；还有获取用户头像昵称的模式，snsapi_userinfo。这里用的是前者，后者稍微复杂一点，不过也差不多。")]),e._v(" "),a("h4",{attrs:{id:"在微信公众平台中配置公众号的一些设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在微信公众平台中配置公众号的一些设置"}},[e._v("#")]),e._v(" 在微信公众平台中配置公众号的一些设置")]),e._v(" "),a("p",[e._v("首先需要一个认证过的公众号，打开该公众号的微信公众平台，“设置-公众号设置-功能设置”中配置==JS接口安全域名和网页授权域名==，配置为自己的服务器后台。")]),e._v(" "),a("p",[e._v("另外还要在“开发-基本配置”中设置==AppID和AppSecret==。")]),e._v(" "),a("h4",{attrs:{id:"配置登录url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置登录url"}},[e._v("#")]),e._v(" 配置登录url")]),e._v(" "),a("p",[e._v("修改下面链接中的appid以及redirect_uri：")]),e._v(" "),a("p",[e._v("https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx1dc58e51482e908e&redirect_uri=http://yunuo.leostudio.top&response_type=code&scope=snsapi_base&state=123#wechat_redirect")]),e._v(" "),a("p",[e._v("其中appid设置为你自己公众号的appid，redirect_uri需要为你需要打开的自己服务器上要展示给用户的网页。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("appid=wx1dc58e51482e908e\nredirect_uri=http://yunuo.leostudio.top\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("scope=snsapi_base表示只获取用户的基础信息（openid），不获取头像昵称等信息，不需要用户点确认。state=123#wechat_redirect不知道是啥意思，先不管。")]),e._v(" "),a("h4",{attrs:{id:"在微信中打开链接-获取code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在微信中打开链接-获取code"}},[e._v("#")]),e._v(" 在微信中打开链接，获取code")]),e._v(" "),a("p",[e._v("微信中随便打开聊天窗口发送该链接，点击链接后就会在微信中打开网页。")]),e._v(" "),a("p",[e._v("如果成功的话就会跳转到你设置的redirect_uri，并且会附加一个参数code。例如：\nhttp://yunuo.leostudio.top/?code=033ou1xw03tigc1pMfzw0oM8xw0ou1xQ&state=123#/\n失败的话很可能是上面的某一步没做对。另外这个code是有时效的，大概5分钟。需要再5分钟内通过code获取用户信息。")]),e._v(" "),a("h4",{attrs:{id:"前端将code传到后台-后台通过code从微信服务器获取用户信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端将code传到后台-后台通过code从微信服务器获取用户信息"}},[e._v("#")]),e._v(" 前端将code传到后台，后台通过code从微信服务器获取用户信息")]),e._v(" "),a("p",[e._v("前端页面获取到code的参数后，发送给后台服务器，后台通过调用下面的微信的api来获取用户的access_token。（snsapi_base模式下，这一次调用就会获取openid）：")]),e._v(" "),a("p",[e._v("https://api.weixin.qq.com/sns/oauth2/access_token?appid=wx1dc58e51482e908e&secret=102bb216f7fc76be39f2173cca5bceec&code=033ou1xw03tigc1pMfzw0oM8xw0ou1xQ&grant_type=authorization_code")])])}),[],!1,null,null,null);t.default=o.exports}}]);