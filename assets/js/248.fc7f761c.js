(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{520:function(s,t,a){"use strict";a.r(t);var n=a(16),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"app-json-设置debug-true-log日志显示函数调用详情"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-json-设置debug-true-log日志显示函数调用详情"}},[s._v("#")]),s._v(" app.json 设置debug true， log日志显示函数调用详情")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pages/index/index"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pages/login/login"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"window"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"backgroundTextStyle"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"light"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"navigationBarBackgroundColor"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#fff"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"navigationBarTitleText"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WeChat"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"navigationBarTextStyle"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"black"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"debug"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"getuserinfo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getuserinfo"}},[s._v("#")]),s._v(" getUserInfo")]),s._v(" "),a("p",[s._v('一个button的 openType="getUserInfo"时，同时绑定函数 bindgetuserinfo="authorLogin"，当用户点击该按钮会弹出授权提示，同意后会调用authorLogin。')]),s._v(" "),a("p",[s._v("wxml：")]),s._v(" "),a("p",[a("button",{staticClass:"login-btn",attrs:{openType:"getUserInfo",lang:"zh_CN",bindgetuserinfo:"authorLogin"}},[s._v("授权登录")])]),s._v(" "),a("p",[s._v("authorLogin(e){")]),s._v(" "),a("p",[s._v("console.log(e);")]),s._v(" "),a("p",[s._v("}")]),s._v(" "),a("p",[s._v("得到的e：")]),s._v(" "),a("p",[a("img",{attrs:{src:"mdimg/clipboard-16331609559791.png",alt:"img"}})]),s._v(" "),a("p",[s._v("其中e.detail.rawData就包含了用户信息，就是以前的user_info")]),s._v(" "),a("p",[s._v("e.detail.userInfo也是用户信息。")]),s._v(" "),a("p",[s._v("不同的是e.detail.rawData是一个字符串，而e.detail.userInfo仍然是json结构体。")]),s._v(" "),a("p",[s._v("昵称，e.detail.userInfo.nickName，")]),s._v(" "),a("p",[s._v("头像，e.detail.userInfo.avatarUrl，")]),s._v(" "),a("p",[s._v("wx.getUserInfo调用时，success的返回结果记为res")]),s._v(" "),a("p",[s._v("//得到用户信息")]),s._v(" "),a("p",[s._v("​        wx.getUserInfo({")]),s._v(" "),a("p",[s._v("​          success: function (res) {")]),s._v(" "),a("p",[s._v("​            \tconsole.log(res);")]),s._v(" "),a("p",[s._v("​          },")]),s._v(" "),a("p",[s._v("​      },")]),s._v(" "),a("p",[a("img",{attrs:{src:"mdimg/clipboard.png",alt:"img"}})]),s._v(" "),a("p",[s._v("res.rawData 和 e.detail.rawData 是一样的")]),s._v(" "),a("p",[s._v("注意这里的setStorageSync是set的字符串，读取的时候要JSON.parse解析成json结构体。")]),s._v(" "),a("p",[s._v("wx.setStorageSync('userInfo', e.detail.rawData);")]),s._v(" "),a("p",[s._v("var userinfo = JSON.parse(wx.getStorageSync('userinfo'));")]),s._v(" "),a("h3",{attrs:{id:"image-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#image-mode"}},[s._v("#")]),s._v(" image mode")]),s._v(" "),a("p",[s._v("https://developers.weixin.qq.com/miniprogram/dev/component/image.html")]),s._v(" "),a("p",[s._v("aspectFill")]),s._v(" "),a("p",[s._v("保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说，图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。（这样可以填满）")]),s._v(" "),a("h3",{attrs:{id:"setdata才能刷新页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setdata才能刷新页面"}},[s._v("#")]),s._v(" setdata才能刷新页面")]),s._v(" "),a("p",[s._v("setdata才能刷新页面，this.data.var直接赋值不能刷新页面，会数据错乱")]),s._v(" "),a("h3",{attrs:{id:"wx-login返回数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wx-login返回数据"}},[s._v("#")]),s._v(" wx.login返回数据")]),s._v(" "),a("p",[s._v("小程序前端向微信服务器发送login，得到code，然后将code发送给小程序后台服务器\n后台服务器向微信服务器发送http请求，包括code，appID和secret，成功后返回：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("$wxResult\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"session_key"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"9BC5cIgGo5nFRZmlvt3ENQ=="')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"openid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"oNqWP4sTyAJmVOZmOmgIc4IKt4P4"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n失败可能返回：\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"errcode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40029")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"errmsg"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v('"invalid code'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \nhints"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" req_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" xhm6304862160 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v('"\n'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n也可能返回空或者其他的。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"wx-navigateto-switchtab-redirectto"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wx-navigateto-switchtab-redirectto"}},[s._v("#")]),s._v(" wx.navigateTo，switchTab，redirectTo")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("navigateTo 和redirectTo 不能跳转到底部的几个主页面上。\nhttps"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("developers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("weixin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("qq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("miniprogram"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("redirectTo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html\n\n\nwx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("navigateTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../login/login'")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n要用这个\n    wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("switchTab")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../home/home'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n\n多个逗号不会跳转：\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// wx.navigateTo({")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   url: 'pages/login/login',")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// });")]),s._v("\n\n要这样的：\n    wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("navigateTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/pages/login/login'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// url: '/pages/index/index',如果开头有斜杠，则是以根目录为参考路径，如果没有则是以当前目录为参考。")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("h3",{attrs:{id:"微信公众号发送模板消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信公众号发送模板消息"}},[s._v("#")]),s._v(" 微信公众号发送模板消息")]),s._v(" "),a("h5",{attrs:{id:"获取access-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取access-token"}},[s._v("#")]),s._v(" 获取access token")]),s._v(" "),a("ul",[a("li",[s._v("微信官方说明文档：https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Get_access_token.html")])]),s._v(" "),a("p",[s._v("微信公众平台，公众号： "),a("a",{attrs:{href:"http://mailto:yunuoweixin@sina.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("yunuoweixin@sina.com"),a("OutboundLink")],1),s._v(" yunuo725224")]),s._v(" "),a("p",[s._v("AppID：wx1dc58e51482e908e AppSecret：102bb216f7fc76be39f2173cca5bceec")]),s._v(" "),a("h5",{attrs:{id:"发送模板消息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发送模板消息"}},[s._v("#")]),s._v(" 发送模板消息")]),s._v(" "),a("ul",[a("li",[s._v("微信官方说明文档：https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Template_Message_Interface.html")])]),s._v(" "),a("p",[s._v("模板消息：异常提醒 模板消息id：cLYfActizoK3Pe4-sfQrnnYrlrDMd3KZsp14vt8N0yA")])])}),[],!1,null,null,null);t.default=e.exports}}]);